{"version":3,"file":"learningModulePart.service.js","sourceRoot":"/","sources":["services/learningModulePart/learningModulePart.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAGA,uEAA+C;AAC/C,wEAAqE;AACrE,4EAAyE;AACzE,wGAA+E;AAI/E,MAAa,yBAAyB;IAKlC,YAAqB,sBAA8C;QAA9C,2BAAsB,GAAtB,sBAAsB,CAAwB;QAE/D,MAAM,kBAAkB,GAAG,IAAI,6BAAkB,EAAE,CAAA;QACnD,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAA;IAChD,CAAC;IAEK,MAAM,CAAE,gBAAwB,EAAE,IAAmC;;YAEvE,IACA,CAAC;gBACG,MAAM,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAE,gBAAgB,EAAE,IAAI,CAAE,CAAA;gBAClE,MAAM,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAE,gBAAgB,CAAE,CAAA;gBACxE,gBAAM,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAA;YACpD,CAAC;YACD,OAAM,CAAM,EACZ,CAAC;gBACG,gBAAM,CAAC,KAAK,CAAC,CAAC,EAAC,qEAAqE,CAAC,CAAA;gBACrF,MAAM,IAAI,yBAAW,CAAC,mEAAmE,CAAC,CAAA;YAC9F,CAAC;QACL,CAAC;KAAA;IAEK,IAAI,CAAE,QAAgB,EAAE,eAAuB;;YAEjD,IACA,CAAC;gBAEG,IAAI,SAAS,GAAG,MAAM,CAAE,eAAe,CAAE,CAAA;gBAGzC,gBAAM,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAA;gBACrD,OAAO,CAAC,GAAG,CAAC,sBAAuB,OAAO,SAAU,EAAE,CAAC,CAAA;gBACvD,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAE,CAAA;gBAEzE,IAAI,CAAC,IAAI,EACT,CAAC;oBACG,gBAAM,CAAC,KAAK,CAAC,sBAAuB,SAAU,kBAAmB,QAAS,EAAE,CAAC,CAAA;oBAC7E,MAAM,IAAI,6BAAa,CAAC,sBAAuB,SAAU,kBAAmB,QAAS,EAAE,CAAC,CAAA;gBAC5F,CAAC;gBAED,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;gBACnB,OAAO,CAAC,GAAG,CAAE,IAAI,CAAE,CAAA;gBACnB,OAAO,IAAI,CAAC,CAAC,CAAC,CAAA;YAClB,CAAC;YACD,OAAM,CAAM,EACZ,CAAC;gBAEG,IAAI,CAAC,YAAY,6BAAa,EAC9B,CAAC;oBACG,MAAM,CAAC,CAAA;gBACX,CAAC;gBAED,gBAAM,CAAC,KAAK,CAAC,CAAC,EAAC,qDAAsD,eAAgB,EAAE,CAAC,CAAA;gBACxF,MAAM,IAAI,yBAAW,CAAC,mDAAoD,eAAgB,EAAE,CAAC,CAAA;YACjG,CAAC;QACL,CAAC;KAAA;IAEK,MAAM,CAAE,gBAAwB,EAAE,SAAc;;YAElD,IACA,CAAC;gBACG,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAE,gBAAgB,EAAE,SAAS,CAAE,CAAA;gBAEvF,IAAI,CAAC,OAAO,EACZ,CAAC;oBACG,gBAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAA;oBACtC,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAA;gBACnD,CAAC;gBAED,OAAM;YACV,CAAC;YACD,OAAM,CAAM,EACZ,CAAC;gBACG,gBAAM,CAAC,KAAK,CAAC,CAAC,EAAC,mDAAmD,CAAC,CAAA;gBACnE,MAAM,IAAI,yBAAW,CAAC,mDAAmD,CAAC,CAAA;YAC9E,CAAC;QAEL,CAAC;KAAA;CAGJ;AApFD,8DAoFC","sourcesContent":["\r\nimport { ICreateLearningModulePart_Req } from \"@src/DTOs/learningModulePart/learningModulePart.dto\";\r\nimport { LearningModulePartRepo } from \"@src/repos/learningModulePart/learningModulePart.repo\";\r\nimport logger from \"@src/system/logger/logger\";\r\nimport { ServerError } from \"@src/util/Errors/Endpoints/serverError\";\r\nimport { NotFoundError } from \"@src/util/Errors/Endpoints/notFoundError\";\r\nimport LearningModuleRepo from \"@src/repos/LearningModule/learningModule.repo\";\r\n\r\n\r\n\r\nexport class LearningModulePartService \r\n{\r\n   \r\n    private learningModuleRepo: LearningModuleRepo \r\n\r\n    constructor( private learningModulePartRepo: LearningModulePartRepo )\r\n    {\r\n        const learningModuleRepo = new LearningModuleRepo() \r\n        this.learningModuleRepo = learningModuleRepo\r\n    }\r\n\r\n    async create( learningModuleID: string, part: ICreateLearningModulePart_Req ): Promise< void > \r\n    {\r\n        try \r\n        {\r\n            await this.learningModulePartRepo.create( learningModuleID, part )\r\n            await this.learningModuleRepo.incrementNumberOfParts( learningModuleID ) \r\n            logger.info(\"NEW PART ADDED TO LEARNING MODULE\")\r\n        }\r\n        catch(e: any) \r\n        {\r\n            logger.error(e,'DATABASE_ERROR: Error Occured While Adding Part to Learning Module ')\r\n            throw new ServerError(\"SERVER_ERROR: Error Occured While Adding Part to Learning Module \")\r\n        }\r\n    }\r\n\r\n    async find( moduleID: string, partIndexString: string )\r\n    {\r\n        try \r\n        {\r\n\r\n            var partIndex = Number( partIndexString ) \r\n        \r\n        \r\n            logger.info(\"SERVICE: Getting Learning Module Part \") \r\n            console.log(` Typeof partIndex: ${ typeof partIndex }`)\r\n            const part = await this.learningModulePartRepo.find(moduleID, partIndex ) \r\n\r\n            if( !part )\r\n            {\r\n                logger.error(`Did not find part: ${ partIndex } in  ModuleID: ${ moduleID }`)\r\n                throw new NotFoundError(`Did not find part: ${ partIndex } in  ModuleID: ${ moduleID }`)   \r\n            }\r\n\r\n            console.log('here')\r\n            console.dir( part ) \r\n            return part[0]\r\n        }\r\n        catch(e: any )\r\n        {\r\n\r\n            if( e instanceof NotFoundError )\r\n            {\r\n                throw e \r\n            }\r\n\r\n            logger.error(e,`DATABASE ENCOUNTERED ERROR WHILE FINDING PART NO: ${ partIndexString }`)\r\n            throw new ServerError(`SERVER ENCOUNTERED ERROR WHILE FINDING PART NO: ${ partIndexString }`)\r\n        }\r\n    }\r\n\r\n    async update( learningModuleID: string, updateDoc: any ): Promise<void> \r\n    {\r\n        try \r\n        {\r\n            const updated = await this.learningModulePartRepo.update( learningModuleID, updateDoc ) \r\n\r\n            if( !updated )\r\n            {\r\n                logger.error(\"Failed to Update Part \")\r\n                throw new Error(\"FAILED TO UPDATE MODULE PART\")\r\n            }\r\n\r\n            return \r\n        }\r\n        catch(e: any )\r\n        {\r\n            logger.error(e,'Error Occured while updating Learning Module Part')\r\n            throw new ServerError(\"Error Occured while updating Learning Module Part\")\r\n        }\r\n\r\n    }\r\n\r\n\r\n}"]}