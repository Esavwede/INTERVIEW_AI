{"version":3,"file":"uploadDocToServer.js","sources":["util/upload/doc/uploadDocToServer.ts"],"sourceRoot":"/","sourcesContent":["\r\nimport multer from \"multer\" \r\nimport path from \"path\";\r\nimport { config } from \"dotenv\"\r\nconfig() \r\n\r\n// Configure multer for file uploads\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, cb) => {\r\n     \r\n        // Validate file\r\n      const uploadPath = path.resolve(\"src\", \"uploads\")\r\n      cb(null, uploadPath ); \r\n    },\r\n    filename: (req, file, cb) => {\r\n    \r\n      const userId = req.user?._id \r\n      const fileExt = path.extname( file.originalname )  \r\n\r\n      const parentPath = path.resolve(\"src\",\"uploads\") // Set Parent Path \r\n      const filePath = `${userId}-resume${ fileExt }`// Set File Path \r\n\r\n      const fullPath = path.join(parentPath, filePath ) // Set Full Path \r\n      \r\n      // Save File Path To Request \r\n      req.resumePath = fullPath\r\n      \r\n      cb(null, filePath)\r\n    },\r\n  });\r\n\r\n\r\n  export const uploadToServer = multer({ storage , limits: { fileSize: 3 * 1024 * 1024 }})"],"names":[],"mappings":";;;;;;;;AACA,oDAA2B;AAC3B,gDAAwB;AACxB,mCAA+B;AAC/B,IAAA,eAAM,GAAE,CAAA;AAGR,MAAM,OAAO,GAAG,gBAAM,CAAC,WAAW,CAAC;IAC/B,WAAW,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;QAG7B,MAAM,UAAU,GAAG,cAAI,CAAC,OAAO,CAAC,KAAK,EAAE,SAAS,CAAC,CAAA;QACjD,EAAE,CAAC,IAAI,EAAE,UAAU,CAAE,CAAC;IACxB,CAAC;IACD,QAAQ,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;;QAE1B,MAAM,MAAM,GAAG,MAAA,GAAG,CAAC,IAAI,0CAAE,GAAG,CAAA;QAC5B,MAAM,OAAO,GAAG,cAAI,CAAC,OAAO,CAAE,IAAI,CAAC,YAAY,CAAE,CAAA;QAEjD,MAAM,UAAU,GAAG,cAAI,CAAC,OAAO,CAAC,KAAK,EAAC,SAAS,CAAC,CAAA;QAChD,MAAM,QAAQ,GAAG,GAAG,MAAM,UAAW,OAAQ,EAAE,CAAA;QAE/C,MAAM,QAAQ,GAAG,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAE,CAAA;QAGjD,GAAG,CAAC,UAAU,GAAG,QAAQ,CAAA;QAEzB,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;IACpB,CAAC;CACF,CAAC,CAAC;AAGU,QAAA,cAAc,GAAG,IAAA,gBAAM,EAAC,EAAE,OAAO,EAAG,MAAM,EAAE,EAAE,QAAQ,EAAE,CAAC,GAAG,IAAI,GAAG,IAAI,EAAE,EAAC,CAAC,CAAA","debug_id":"fa20a239-fc07-50df-b8ea-8f48bb4c6689"}