{"version":3,"file":"uploadDocToServer.js","sources":["util/upload/doc/uploadDocToServer.ts"],"sourceRoot":"/","sourcesContent":["\r\nimport multer from \"multer\" \r\nimport path from \"path\";\r\nimport { config } from \"dotenv\"\r\nconfig() \r\n\r\n// Configure multer for file uploads\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, cb) => {\r\n     \r\n        // Validate file\r\n      const uploadPath = path.resolve(\"src\", \"uploads\")\r\n      cb(null, uploadPath ); \r\n    },\r\n    filename: (req, file, cb) => {\r\n    \r\n      const userId = req.user?._id \r\n      const fileExt = path.extname( file.originalname )  \r\n      cb(null, `${userId}-resume.${ fileExt }`)\r\n    },\r\n  });\r\n\r\n\r\n  export const uploadToServer = multer({ storage , limits: { fileSize: 3 * 1024 * 1024 }});\r\n\r\n"],"names":[],"mappings":";;;;;;;;AACA,oDAA2B;AAC3B,gDAAwB;AACxB,mCAA+B;AAC/B,IAAA,eAAM,GAAE,CAAA;AAGR,MAAM,OAAO,GAAG,gBAAM,CAAC,WAAW,CAAC;IAC/B,WAAW,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;QAG7B,MAAM,UAAU,GAAG,cAAI,CAAC,OAAO,CAAC,KAAK,EAAE,SAAS,CAAC,CAAA;QACjD,EAAE,CAAC,IAAI,EAAE,UAAU,CAAE,CAAC;IACxB,CAAC;IACD,QAAQ,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;;QAE1B,MAAM,MAAM,GAAG,MAAA,GAAG,CAAC,IAAI,0CAAE,GAAG,CAAA;QAC5B,MAAM,OAAO,GAAG,cAAI,CAAC,OAAO,CAAE,IAAI,CAAC,YAAY,CAAE,CAAA;QACjD,EAAE,CAAC,IAAI,EAAE,GAAG,MAAM,WAAY,OAAQ,EAAE,CAAC,CAAA;IAC3C,CAAC;CACF,CAAC,CAAC;AAGU,QAAA,cAAc,GAAG,IAAA,gBAAM,EAAC,EAAE,OAAO,EAAG,MAAM,EAAE,EAAE,QAAQ,EAAE,CAAC,GAAG,IAAI,GAAG,IAAI,EAAE,EAAC,CAAC,CAAC","debug_id":"0f5b5307-e4b0-5b0e-920c-1ab7c8165771"}