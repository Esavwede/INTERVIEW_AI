{"version":3,"file":"sendMain.js","sourceRoot":"/","sources":["util/mail/sendMain.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAiBA,4BAuBC;AAtCD,uEAA+C;AAC/C,0DAAiC;AACjC,4DAAiC;AACjC,iEAA8D;AAG9D,MAAM,OAAO,GAAG,IAAI,oBAAO,CAAC,mBAAQ,CAAC,CAAC;AAGtC,MAAM,EAAE,GAAG,OAAO,CAAC,MAAM,CAAC;IACxB,QAAQ,EAAE,KAAK;IACf,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,eAAe,IAAI,iBAAiB;CACtD,CAAC,CAAC;AAGH,SAAsB,QAAQ,CAAE,WAA2E;;QAEvG,IACA,CAAC;YAEE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,WAAW,CAAA;YAElD,MAAM,MAAM,GAAG,MAAO,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,qDAAqD,EAAE;gBAC3F,IAAI,EAAE,4EAA4E;gBAClF,EAAE,EAAE,CAAE,KAAK,CAAC;gBACZ,OAAO;gBACP,IAAI;gBACJ,IAAI;aACL,CAAC,CAAA;YAGF,gBAAM,CAAC,IAAI,CAAE,MAAM,CAAE,CAAA;QAC3B,CAAC;QACD,OAAM,CAAM,EACZ,CAAC;YACG,gBAAM,CAAC,KAAK,CAAC,CAAC,EAAC,kCAAkC,CAAC,CAAA;YAClD,MAAM,IAAI,yBAAW,CAAC,kCAAkC,CAAC,CAAA;QAC7D,CAAC;IACL,CAAC;CAAA","sourcesContent":["\r\n\r\nimport logger from '@src/system/logger/logger';\r\nimport FormData from 'form-data';\r\nimport Mailgun from 'mailgun.js';\r\nimport { ServerError } from '../Errors/Endpoints/serverError';\r\n\r\n\r\nconst mailgun = new Mailgun(FormData);\r\n\r\n\r\nconst mg = mailgun.client({\r\n  username: 'api',\r\n  key: process.env.MAILGUN_API_KEY || 'key-yourkeyhere'\r\n});\r\n\r\n\r\nexport async function sendMail( mailOptions: { email: string, html: string, subject: string, text: string } )\r\n{\r\n    try \r\n    {\r\n\r\n       const { email, subject, text, html } = mailOptions\r\n      \r\n       const result = await  mg.messages.create('sandboxe7bb68fd69ec47c8b3bc14a21fab66ed.mailgun.org', {\r\n            from: \"Interview AI <mailgun@sandboxe7bb68fd69ec47c8b3bc14a21fab66ed.mailgun.org>\",\r\n            to: [ email],\r\n            subject,\r\n            text,\r\n            html\r\n          })\r\n        \r\n\r\n          logger.info( result ) \r\n    }\r\n    catch(e: any ) \r\n    {\r\n        logger.error(e,\"Error Occured While Sending Mail\") \r\n        throw new ServerError(\"Error Occured While Sending Mail\")\r\n    }\r\n}\r\n"]}