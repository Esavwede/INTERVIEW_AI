{"version":3,"file":"sendMain.js","sources":["util/mail/sendMain.ts"],"sourceRoot":"/","sourcesContent":["\r\n\r\nimport logger from '@src/system/logger/logger';\r\nimport FormData from 'form-data';\r\nimport Mailgun from 'mailgun.js';\r\nimport { ServerError } from '../Errors/Endpoints/serverError';\r\n\r\n\r\nconst mailgun = new Mailgun(FormData);\r\n\r\n\r\nconst mg = mailgun.client({\r\n  username: 'api',\r\n  key: process.env.MAILGUN_API_KEY || 'key-yourkeyhere'\r\n});\r\n\r\n\r\nexport async function sendMail( mailOptions: { email: string, html: string, subject: string, text: string } )\r\n{\r\n    try \r\n    {\r\n\r\n       const { email, subject, text, html } = mailOptions\r\n      \r\n       const MAIL_URL = process.env.ENV_SIGNUP_MAIL_URL || 'sandboxe7bb68fd69ec47c8b3bc14a21fab66ed.mailgun.org'\r\n       const MAIL_SENDER = process.env.ENV_SIGNUP_MAIL_SENDER || 'mailgun@sandboxe7bb68fd69ec47c8b3bc14a21fab66ed.mailgun.org'\r\n\r\n       const result = await  mg.messages.create( MAIL_URL, {\r\n            from: `Interview AI <${MAIL_SENDER}>`,\r\n            to: [ email],\r\n            subject,\r\n            text,\r\n            html\r\n          })\r\n        \r\n\r\n          logger.info( result ) \r\n    }\r\n    catch(e: any ) \r\n    {\r\n        logger.error(e,\"Error Occured While Sending Mail\") \r\n        throw new ServerError(\"Error Occured While Sending Mail\")\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAiBA,4BA0BC;AAzCD,uEAA+C;AAC/C,0DAAiC;AACjC,4DAAiC;AACjC,iEAA8D;AAG9D,MAAM,OAAO,GAAG,IAAI,oBAAO,CAAC,mBAAQ,CAAC,CAAC;AAGtC,MAAM,EAAE,GAAG,OAAO,CAAC,MAAM,CAAC;IACxB,QAAQ,EAAE,KAAK;IACf,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,eAAe,IAAI,iBAAiB;CACtD,CAAC,CAAC;AAGH,SAAsB,QAAQ,CAAE,WAA2E;;QAEvG,IACA,CAAC;YAEE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,WAAW,CAAA;YAElD,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI,qDAAqD,CAAA;YACzG,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,sBAAsB,IAAI,6DAA6D,CAAA;YAEvH,MAAM,MAAM,GAAG,MAAO,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAE,QAAQ,EAAE;gBAC/C,IAAI,EAAE,iBAAiB,WAAW,GAAG;gBACrC,EAAE,EAAE,CAAE,KAAK,CAAC;gBACZ,OAAO;gBACP,IAAI;gBACJ,IAAI;aACL,CAAC,CAAA;YAGF,gBAAM,CAAC,IAAI,CAAE,MAAM,CAAE,CAAA;QAC3B,CAAC;QACD,OAAM,CAAM,EACZ,CAAC;YACG,gBAAM,CAAC,KAAK,CAAC,CAAC,EAAC,kCAAkC,CAAC,CAAA;YAClD,MAAM,IAAI,yBAAW,CAAC,kCAAkC,CAAC,CAAA;QAC7D,CAAC;IACL,CAAC;CAAA","debug_id":"e16e7133-9f56-59b9-bece-edf2a6c21a70"}