{"version":3,"file":"validateRequestSchema.js","sources":["middleware/validate/request/validateRequestSchema.ts"],"sourceRoot":"/","sourcesContent":["\r\nimport logger from \"@src/system/logger/logger\"\r\nimport { Request, Response, NextFunction } from \"express-serve-static-core\"\r\nimport { AnyZodObject, z, ZodError } from \"zod\" \r\n\r\n\r\nexport function validateRequestSchema( schema: AnyZodObject )\r\n{\r\n    return (req: Request, res: Response, next: NextFunction )=>\r\n    {\r\n\r\n        try \r\n        {\r\n            schema.parse(\r\n                {\r\n                    body: req.body,\r\n                    query: req.query, \r\n                    params: req.params\r\n                }\r\n            )\r\n\r\n            next() \r\n        }\r\n        catch(e: any)\r\n        {\r\n            logger.error(e,'Request Schema Error')\r\n\r\n           if( e instanceof ZodError )\r\n           {\r\n\r\n             var errs: string[] = [] \r\n             e.errors.forEach((e)=>{  errs.push(e.message) })\r\n             \r\n             return res.status(422).json({ success: false, msg:\"bad request\", errors: errs  })\r\n           }\r\n          \r\n           return res.status(500).json({ success: false, msg:\"Server Error\"})\r\n        }\r\n    }\r\n}"],"names":[],"mappings":";;;;;;;AAMA,sDAiCC;AAtCD,uEAA8C;AAE9C,6BAA+C;AAG/C,SAAgB,qBAAqB,CAAE,MAAoB;IAEvD,OAAO,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;QAGvD,IACA,CAAC;YACG,MAAM,CAAC,KAAK,CACR;gBACI,IAAI,EAAE,GAAG,CAAC,IAAI;gBACd,KAAK,EAAE,GAAG,CAAC,KAAK;gBAChB,MAAM,EAAE,GAAG,CAAC,MAAM;aACrB,CACJ,CAAA;YAED,IAAI,EAAE,CAAA;QACV,CAAC;QACD,OAAM,CAAM,EACZ,CAAC;YACG,gBAAM,CAAC,KAAK,CAAC,CAAC,EAAC,sBAAsB,CAAC,CAAA;YAEvC,IAAI,CAAC,YAAY,cAAQ,EACzB,CAAC;gBAEC,IAAI,IAAI,GAAa,EAAE,CAAA;gBACvB,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA,CAAC,CAAC,CAAC,CAAA;gBAEhD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,EAAC,aAAa,EAAE,MAAM,EAAE,IAAI,EAAG,CAAC,CAAA;YACnF,CAAC;YAED,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,EAAC,cAAc,EAAC,CAAC,CAAA;QACrE,CAAC;IACL,CAAC,CAAA;AACL,CAAC","debug_id":"c13e58a7-e946-538b-99a0-aa9be55745ea"}