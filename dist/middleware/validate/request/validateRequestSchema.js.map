{"version":3,"file":"validateRequestSchema.js","sources":["middleware/validate/request/validateRequestSchema.ts"],"sourceRoot":"/","sourcesContent":["\r\nimport logger from \"@src/system/logger/logger\"\r\nimport { Request, Response, NextFunction } from \"express-serve-static-core\"\r\nimport { AnyZodObject, ZodError } from \"zod\" \r\n\r\n\r\nexport function validateRequestSchema( schema: AnyZodObject )\r\n{\r\n    return (req: Request, res: Response, next: NextFunction )=>\r\n    {\r\n\r\n        try \r\n        {\r\n            schema.parse(\r\n                {\r\n                    body: req.body,\r\n                    query: req.query, \r\n                    params: req.params\r\n                }\r\n            )\r\n\r\n            next() \r\n        }\r\n        catch(e: any)\r\n        {\r\n\r\n           if( e instanceof ZodError )\r\n           {\r\n\r\n            console.log('Debugging-----')\r\n            console.log(e)\r\n             var errs: string[] = [] \r\n             e.errors.forEach((e)=>{  errs.push(e.message) })\r\n             \r\n             logger.error('Zod: Request Schema Error')\r\n             logger.error(errs)\r\n             return res.status(422).json({ success: false, msg:\"bad request\", errors: errs  })\r\n           }\r\n          \r\n           logger.error(`Server: Request Schema Validation Error ${ e }`)\r\n           return res.status(500).json({ success: false, msg:\"Server Error\"})\r\n        }\r\n    }\r\n}"],"names":[],"mappings":";;;;;;;AAMA,sDAqCC;AA1CD,uEAA8C;AAE9C,6BAA4C;AAG5C,SAAgB,qBAAqB,CAAE,MAAoB;IAEvD,OAAO,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;QAGvD,IACA,CAAC;YACG,MAAM,CAAC,KAAK,CACR;gBACI,IAAI,EAAE,GAAG,CAAC,IAAI;gBACd,KAAK,EAAE,GAAG,CAAC,KAAK;gBAChB,MAAM,EAAE,GAAG,CAAC,MAAM;aACrB,CACJ,CAAA;YAED,IAAI,EAAE,CAAA;QACV,CAAC;QACD,OAAM,CAAM,EACZ,CAAC;YAEE,IAAI,CAAC,YAAY,cAAQ,EACzB,CAAC;gBAEA,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAA;gBAC7B,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;gBACb,IAAI,IAAI,GAAa,EAAE,CAAA;gBACvB,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA,CAAC,CAAC,CAAC,CAAA;gBAEhD,gBAAM,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAA;gBACzC,gBAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;gBAClB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,EAAC,aAAa,EAAE,MAAM,EAAE,IAAI,EAAG,CAAC,CAAA;YACnF,CAAC;YAED,gBAAM,CAAC,KAAK,CAAC,2CAA4C,CAAE,EAAE,CAAC,CAAA;YAC9D,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,EAAC,cAAc,EAAC,CAAC,CAAA;QACrE,CAAC;IACL,CAAC,CAAA;AACL,CAAC","debug_id":"f5720088-4bd0-57ce-82b1-da56150f11ca"}